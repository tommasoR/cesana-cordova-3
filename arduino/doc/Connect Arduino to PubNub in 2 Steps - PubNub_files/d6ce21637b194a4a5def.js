document.write('<link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-8bf0013c72fb64f0bb1bc1872b43e39e.css">')
document.write('<div id=\"gist12671717\" class=\"gist\">\n        <div class=\"gist-file\">\n          <div class=\"gist-data gist-syntax\">\n            \n\n\n\n    <div class=\"file-data\">\n      <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines highlight\">\n        <tr>\n          <td class=\"line-numbers\">\n            <span class=\"line-number\" id=\"file-1-h-L1\" rel=\"file-1-h-L1\">1<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L2\" rel=\"file-1-h-L2\">2<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L3\" rel=\"file-1-h-L3\">3<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L4\" rel=\"file-1-h-L4\">4<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L5\" rel=\"file-1-h-L5\">5<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L6\" rel=\"file-1-h-L6\">6<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L7\" rel=\"file-1-h-L7\">7<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L8\" rel=\"file-1-h-L8\">8<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L9\" rel=\"file-1-h-L9\">9<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L10\" rel=\"file-1-h-L10\">10<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L11\" rel=\"file-1-h-L11\">11<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L12\" rel=\"file-1-h-L12\">12<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L13\" rel=\"file-1-h-L13\">13<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L14\" rel=\"file-1-h-L14\">14<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L15\" rel=\"file-1-h-L15\">15<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L16\" rel=\"file-1-h-L16\">16<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L17\" rel=\"file-1-h-L17\">17<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L18\" rel=\"file-1-h-L18\">18<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L19\" rel=\"file-1-h-L19\">19<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L20\" rel=\"file-1-h-L20\">20<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L21\" rel=\"file-1-h-L21\">21<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L22\" rel=\"file-1-h-L22\">22<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L23\" rel=\"file-1-h-L23\">23<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L24\" rel=\"file-1-h-L24\">24<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L25\" rel=\"file-1-h-L25\">25<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L26\" rel=\"file-1-h-L26\">26<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L27\" rel=\"file-1-h-L27\">27<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L28\" rel=\"file-1-h-L28\">28<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L29\" rel=\"file-1-h-L29\">29<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L30\" rel=\"file-1-h-L30\">30<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L31\" rel=\"file-1-h-L31\">31<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L32\" rel=\"file-1-h-L32\">32<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L33\" rel=\"file-1-h-L33\">33<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L34\" rel=\"file-1-h-L34\">34<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L35\" rel=\"file-1-h-L35\">35<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L36\" rel=\"file-1-h-L36\">36<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L37\" rel=\"file-1-h-L37\">37<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L38\" rel=\"file-1-h-L38\">38<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L39\" rel=\"file-1-h-L39\">39<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L40\" rel=\"file-1-h-L40\">40<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L41\" rel=\"file-1-h-L41\">41<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L42\" rel=\"file-1-h-L42\">42<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L43\" rel=\"file-1-h-L43\">43<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L44\" rel=\"file-1-h-L44\">44<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L45\" rel=\"file-1-h-L45\">45<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L46\" rel=\"file-1-h-L46\">46<\/span>\n            <span class=\"line-number\" id=\"file-1-h-L47\" rel=\"file-1-h-L47\">47<\/span>\n          <\/td>\n          <td class=\"line-data\">\n            <pre class=\"line-pre\"><div class=\"line\" id=\"file-1-h-LC1\">#<span class=\"pl-k\">include<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&lt;<\/span>SPI.h<span class=\"pl-pds\">&gt;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-1-h-LC2\">#<span class=\"pl-k\">include<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&lt;<\/span>Ethernet.h<span class=\"pl-pds\">&gt;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-1-h-LC3\">#<span class=\"pl-k\">include<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>string.h<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-1-h-LC4\">#<span class=\"pl-k\">include<\/span> <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>iotconnector.h<span class=\"pl-pds\">&quot;<\/span><\/span>\n<\/div><div class=\"line\" id=\"file-1-h-LC5\">&nbsp;\n<\/div><div class=\"line\" id=\"file-1-h-LC6\">byte mac[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };\n<\/div><div class=\"line\" id=\"file-1-h-LC7\">&nbsp;\n<\/div><div class=\"line\" id=\"file-1-h-LC8\"><span class=\"pl-st\">char<\/span> pubkey[] = <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>PUBLISH KEYS HERE<span class=\"pl-pds\">&quot;<\/span><\/span>;<span class=\"pl-st\">char<\/span> subkey[] = <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>SUBSCRIBE KEYS HERE<span class=\"pl-pds\">&quot;<\/span><\/span>;<span class=\"pl-st\">char<\/span> channel[] = <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>iotchannel<span class=\"pl-pds\">&quot;<\/span><\/span>;<span class=\"pl-st\">char<\/span> uuid[] = <span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>Arduino<span class=\"pl-pds\">&quot;<\/span><\/span>;\n<\/div><div class=\"line\" id=\"file-1-h-LC9\">&nbsp;\n<\/div><div class=\"line\" id=\"file-1-h-LC10\">iotbridge arduino;\n<\/div><div class=\"line\" id=\"file-1-h-LC11\">&nbsp;\n<\/div><div class=\"line\" id=\"file-1-h-LC12\"><span class=\"pl-st\">void<\/span> <span class=\"pl-en\">initialize<\/span>(){\n<\/div><div class=\"line\" id=\"file-1-h-LC13\">        Serial.<span class=\"pl-s3\">begin<\/span>(<span class=\"pl-c1\">9600<\/span>);\n<\/div><div class=\"line\" id=\"file-1-h-LC14\">	Serial.<span class=\"pl-s3\">println<\/span>(<span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>Serial set up<span class=\"pl-pds\">&quot;<\/span><\/span>);\n<\/div><div class=\"line\" id=\"file-1-h-LC15\">&nbsp;\n<\/div><div class=\"line\" id=\"file-1-h-LC16\">	<span class=\"pl-k\">while<\/span> (!Ethernet.<span class=\"pl-s3\">begin<\/span>(mac)) {\n<\/div><div class=\"line\" id=\"file-1-h-LC17\">		Serial.<span class=\"pl-s3\">println<\/span>(<span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>Ethernet setup error<span class=\"pl-pds\">&quot;<\/span><\/span>);\n<\/div><div class=\"line\" id=\"file-1-h-LC18\">		<span class=\"pl-s3\">delay<\/span>(<span class=\"pl-c1\">1000<\/span>);\n<\/div><div class=\"line\" id=\"file-1-h-LC19\">	}\n<\/div><div class=\"line\" id=\"file-1-h-LC20\">	Serial.<span class=\"pl-s3\">println<\/span>(<span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>Ethernet set up<span class=\"pl-pds\">&quot;<\/span><\/span>);\n<\/div><div class=\"line\" id=\"file-1-h-LC21\">}\n<\/div><div class=\"line\" id=\"file-1-h-LC22\">&nbsp;\n<\/div><div class=\"line\" id=\"file-1-h-LC23\"><span class=\"pl-st\">void<\/span> <span class=\"pl-en\">do_something<\/span>(String value){\n<\/div><div class=\"line\" id=\"file-1-h-LC24\">          Serial.<span class=\"pl-s3\">println<\/span>(<span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span>in the callback<span class=\"pl-pds\">&quot;<\/span><\/span>);\n<\/div><div class=\"line\" id=\"file-1-h-LC25\">          Serial.<span class=\"pl-s3\">println<\/span>(value);\n<\/div><div class=\"line\" id=\"file-1-h-LC26\">        }\n<\/div><div class=\"line\" id=\"file-1-h-LC27\"><span class=\"pl-st\">void<\/span> <span class=\"pl-en\">setup<\/span>()\n<\/div><div class=\"line\" id=\"file-1-h-LC28\">{  \n<\/div><div class=\"line\" id=\"file-1-h-LC29\">	<span class=\"pl-s3\">initialize<\/span>();\n<\/div><div class=\"line\" id=\"file-1-h-LC30\">	arduino.<span class=\"pl-s3\">init<\/span>( pubkey, subkey, uuid);       \n<\/div><div class=\"line\" id=\"file-1-h-LC31\">}\n<\/div><div class=\"line\" id=\"file-1-h-LC32\">&nbsp;\n<\/div><div class=\"line\" id=\"file-1-h-LC33\"><span class=\"pl-st\">void<\/span> <span class=\"pl-en\">loop<\/span>()\n<\/div><div class=\"line\" id=\"file-1-h-LC34\">{      \n<\/div><div class=\"line\" id=\"file-1-h-LC35\">        String returnmessage;\n<\/div><div class=\"line\" id=\"file-1-h-LC36\">	Ethernet.<span class=\"pl-s3\">maintain<\/span>();\n<\/div><div class=\"line\" id=\"file-1-h-LC37\">        \n<\/div><div class=\"line\" id=\"file-1-h-LC38\">        <span class=\"pl-c\">//Publish<\/span>\n<\/div><div class=\"line\" id=\"file-1-h-LC39\">        arduino.<span class=\"pl-s3\">send<\/span>(channel,<span class=\"pl-s1\"><span class=\"pl-pds\">&quot;<\/span><span class=\"pl-cce\">\\&quot;<\/span>Hey There<span class=\"pl-cce\">\\&quot;<\/span><span class=\"pl-pds\">&quot;<\/span><\/span>);\n<\/div><div class=\"line\" id=\"file-1-h-LC40\">&nbsp;\n<\/div><div class=\"line\" id=\"file-1-h-LC41\">        <span class=\"pl-c\">//Subscribe <\/span>\n<\/div><div class=\"line\" id=\"file-1-h-LC42\">        returnmessage = arduino.<span class=\"pl-s3\">connect<\/span>(channel); \n<\/div><div class=\"line\" id=\"file-1-h-LC43\">        \n<\/div><div class=\"line\" id=\"file-1-h-LC44\">        <span class=\"pl-c\">//callback function of sorts, to work with the received message<\/span>\n<\/div><div class=\"line\" id=\"file-1-h-LC45\">        <span class=\"pl-s3\">do_something<\/span>(returnmessage); \n<\/div><div class=\"line\" id=\"file-1-h-LC46\">	Serial.<span class=\"pl-s3\">println<\/span>();\n<\/div><div class=\"line\" id=\"file-1-h-LC47\">}\n<\/div><\/pre>\n          <\/td>\n        <\/tr>\n      <\/table>\n    <\/div>\n\n          <\/div>\n          <div class=\"gist-meta\">\n            <a href=\"https://gist.github.com/ToeJamson/d6ce21637b194a4a5def/raw/1.h\" style=\"float:right\">view raw<\/a>\n            <a href=\"https://gist.github.com/ToeJamson/d6ce21637b194a4a5def#file-1-h\">1.h<\/a>\n            hosted with &#10084; by <a href=\"https://github.com\">GitHub<\/a>\n          <\/div>\n        <\/div>\n<\/div>\n')
